{"version":3,"sources":["main.js"],"names":["myMap","input","document","querySelector","iframe","Points","mapOnce","count","objects","result","onkeydown","e","window","event","keyCode","value","newPoint","createElement","style","display","createTextNode","newPointText","className","newPointTextValue","appendChild","newPointDelete","addEventListener","deleteText","curPointClose","querySelectorAll","i","length","target","geoObjects","remove","myPolyline","j","arrPoly","createPoly","parentNode","init","ymaps","Map","zoom","center","Placemark","getCenter","balloonContent","searchControlProvider","preset","draggable","createMarker","add","Polyline","strokeColor","strokeOpacity","checkKey","ready"],"mappings":"aAAA,IAiDGA,MAjDCC,MAAQC,SAASC,cAAc,SAC/BC,OAASF,SAASC,cAAc,UADhCF,OAAQC,SAASC,cAAc,uBAC/BC,QAASF,SAASC,cAAc,YAChCE,MAAM,EACNC,QAAUJ,GACVK,OAAJ,KACIC,QAAU,GACVC,WAAJ,KAGAP,SAASQ,SAATC,GAEA,GAAkBA,OACjBA,EAAIA,GAAKC,OAAOC,OADjBC,SAAqB,IAAAb,MAAAc,MAAA,CACnB,IAAIC,EAAWH,SAAhBI,cAAA,OAGGD,EAASE,MAAMC,QAAU,OAF5BH,EAAMF,UAAF,4BACD,IAAIE,EAAWd,SAASe,cAAc,KACtCD,EAASE,UAAgB,mBACzBF,IAAAA,EAAqBd,SAAAkB,eAArBnB,MAAAc,OACAM,EAAIA,YAAenB,GACnBmB,EAAAA,YAAaC,GACb,IAAIC,EAAiBrB,SAAGA,cAASkB,OACjCC,EAAaG,iBAAYD,QAAAA,YACzBP,EAASQ,UAAYH,0BACrBI,EAAIA,IAAiBvB,yBACrBuB,EAAAA,YAAeC,GACfD,OAAAA,YAAeH,GACfG,gBAIF,SAAAE,WAAAhB,GAKD,IAJA,IAAAiB,EAAA1B,SAAA2B,iBAAA,4BAIQC,EAAE,EAAGA,EAAEF,EAAcG,OAAQD,IAFtC,GAAAF,EAAoBjB,IAAEA,EAAAqB,OAAA,CAGhBJ,GAFDA,MAAAA,WAAgB1B,OAAS2B,QAAAA,IAIlB7B,MAAMiC,WAAWC,OAAOC,YAF9B,KADI5B,MACgBI,CACRsB,IAAAA,IAAWC,EAAAA,EAAO1B,EAAAA,QAAxBuB,OAAAK,IACMH,MAAWC,WAAOC,OAAxB3B,QAAA4B,IAMI5B,QAAU,GAHMA,GAAX6B,QAASD,QAAsB,GAAZL,QAAxBA,SACUE,QAAAA,OAAWC,EAAO1B,GAC3B8B,cAShB3B,EAAEqB,OAAOO,WAAWrB,MAAMC,QAAU,OADnC,SAAAqB,OAQAxC,MAAQ,IAAIyC,MAAMC,IAAI,MAAO,CAPrBH,OAAAA,CAAT,MAA0BpB,OAC1BwB,KAAA,IASU,CANCH,sBAAZ,kBAIYI,SAAAA,eACAD,QAAIpC,OAAE,IAAAkC,MAAAI,UAAA7C,MAAA8C,YAAA,CACPC,eAAA,WAAA9C,MAAAc,MAAA,aACCiC,CAJVC,OAAA,4BAODC,WAAA,IAEDb,QAASc,OAATnD,MAAuB8C,YACtBtC,aACOuC,MAAAA,WAAgBK,IAAA5C,QAAWP,QADjBM,QAYlB,SAAS+B,aAZR,GAAA/B,QAMG8B,MAAQ9B,WAAeuC,OAAAA,YACvBR,WAAU,IAAAG,MAAAY,SAAAhB,QAAA,CACJJ,eAAezB,WAChB,CACR8C,YAAA,UASWJ,WAAW,EAPdZ,YAAY,EACRiB,cAAO,KAEZpB,MAAAA,WAAiBM,IAAAA,aA5EzBvC,SAAImC,UAAJmB,SAyCaf,MAAAgB,MAAAjB","file":"../main.min.js","sourcesContent":["let input = document.querySelector(\"input\");\r\nlet iframe = document.querySelector(\"iframe\");\r\nlet Points = document.querySelector(\".inf-window__points\");\r\nlet mapOnce = document.querySelector(\".inf-map\");\r\nlet count = 0;\r\nlet objects = [];\r\nlet result = null;\r\nlet arrPoly = [];\r\nlet myPolyline = null;\r\ndocument.onkeydown = checkKey;\r\n\r\nfunction checkKey(e) {\r\n\te = e || window.event;\r\n\tif (e.keyCode == '13' && input.value != \"\") {\r\n\t  \tlet newPoint = document.createElement(\"div\");\r\n\t  \tnewPoint.style.display = \"flex\";\r\n\t  \tnewPoint.className = \"inf-window__point-wrapper\";\r\n\t  \tlet newPointText = document.createElement(\"p\");\r\n\t  \tnewPointText.className = \"inf-window__text\";\r\n\t  \tlet newPointTextValue = document.createTextNode(input.value);\r\n\t  \tnewPointText.appendChild(newPointTextValue);\r\n\t  \tnewPoint.appendChild(newPointText);\r\n\t  \tlet newPointDelete = document.createElement(\"img\");\r\n\t  \tnewPointDelete.addEventListener(\"click\", deleteText);\r\n\t  \tnewPointDelete.className = \"inf-window__point-close\";\r\n\t  \tnewPointDelete.src = \"../img/index/cross.png\";\r\n\t  \tnewPoint.appendChild(newPointDelete);\r\n\t  \tPoints.appendChild(newPoint);\r\n\t  \tcreateMarker();\r\n\t}\r\n}\r\n\r\nfunction deleteText(e){\r\n\tlet curPointClose = document.querySelectorAll(\".inf-window__point-close\");\r\n\tfor(let i=0; i<curPointClose.length; i++){\r\n\t\tif (curPointClose[i] == e.target) {\r\n            myMap.geoObjects.remove(objects[i]);\r\n            myMap.geoObjects.remove(myPolyline);\r\n            count--;\r\n            if (count == 0) {\r\n                for (let j=0; j<objects.length; j++){\r\n                    myMap.geoObjects.remove(objects[j]);\r\n                }\r\n                objects = [];\r\n            }\r\n            if (arrPoly.length != 2 && arrPoly.length != 1) {\r\n                arrPoly.splice(i, 1);\r\n                createPoly();\r\n            }\r\n\t\t}\r\n\t}\r\n\te.target.parentNode.style.display = \"none\";\r\n}\r\n\r\n\r\nymaps.ready(init);\r\n      var myMap;\r\nfunction init () { \r\n\t\tmyMap = new ymaps.Map(\"map\", {\r\n            center: [55.76, 37.64],\r\n            zoom: 10\r\n        }, {\r\n            searchControlProvider: 'yandex#search'\r\n        });\r\n\r\n}\r\n\r\nfunction createMarker(){\r\n\tobjects[count] = new ymaps.Placemark(myMap.getCenter(), {\r\n        balloonContent: '<strong>'+input.value+'</strong>'\r\n    }, {\r\n        preset: 'islands#blackStretchyIcon',\r\n        draggable: false  //Нет смысла не могу перетащить маршрут\r\n    });\r\n    arrPoly[count] = myMap.getCenter();\r\n    createPoly();\r\n    myMap.geoObjects.add(objects[count]);\r\n    count++;     \r\n}\r\n\r\nfunction createPoly(){\r\n    if (count != 0) {\r\n        myMap.geoObjects.remove(myPolyline);\r\n        myPolyline = new ymaps.Polyline(arrPoly, {\r\n            balloonContent: \"Маршрут\"\r\n            }, {\r\n            strokeColor: \"#000000\",\r\n            draggable: true,\r\n            strokeWidth: 4,\r\n            strokeOpacity: 0.5\r\n        });     \r\n    myMap.geoObjects.add(myPolyline);\r\n    }\r\n}\r\n\r\n\r\n"]}